(()=>{"use strict";(()=>{try{const e=document.querySelector("body"),t=document.querySelector(".clubs-list").querySelector("ul"),l=document.getElementById("free_visit_form"),n=document.getElementById("callback_form"),s=document.getElementById("gift"),c=document.querySelector(".fixed-gift"),o=document.querySelector(".header-main"),a=document.getElementById("thanks");t.style.display="none",o.addEventListener("click",(e=>{const l=e.target;l.matches("p")&&"none"===t.style.display?t.style.display="block":(l.matches("ul")||l.matches("a")||!l.matches("li"))&&(t.style.display="none")})),e.addEventListener("click",(e=>{const t=e.target;t.classList.contains("open-popup")?l.style.display="block":t.closest(".callback-btn")&&!t.closest("#callback-btn-no")?n.style.display="block":(t.classList.contains("overlay")||t.classList.contains("close_icon")||t.classList.contains("close-btn"))&&(l.style.display="none",n.style.display="none",a.style.display="none")})),c.addEventListener("click",(()=>{s.style.display="block",c.style.display="none",setTimeout((function(){s.style.display="none"}),3e3)})),s.addEventListener("click",(e=>{const t=e.target;(t.classList.contains("overlay")||t.classList.contains("close_icon")||t.classList.contains("close-btn"))&&(s.style.display="none")}))}catch(e){}})(),(()=>{const e=document.querySelector(".hidden-small"),t=document.querySelector(".menu-button"),l=document.querySelector(".header-main"),n=document.querySelector(".top-menu"),s=document.querySelector(".popup-menu");window.addEventListener("resize",(()=>{document.documentElement.clientWidth>768?(e.style.display="flex",t.style.display="none"):(e.style.display="none",t.style.display="block")})),window.addEventListener("scroll",(()=>{let e=document.documentElement.clientWidth,t=window.pageYOffset;n.style.position=t>187&&e<=768?"fixed":"static"})),l.addEventListener("click",(e=>{const t=e.target;t.matches(".menu-button img")?s.style.display="block":(t.matches(".close-menu-btn img")||t.matches(".scroll a"))&&(s.style.display="none")}))})(),(()=>{const e=document.querySelector(".header-main"),t=document.getElementById("totop");t.style.display="none",window.addEventListener("scroll",(()=>{let l=e.offsetHeight,n=window.pageYOffset;t.style.display=n>=l?"block":"none"}))})(),(()=>{try{const e=document.querySelector(".main-slider").querySelectorAll(".slide");let t=0;const l=(e,t)=>{e[t].style.display="none"},n=(e,t)=>{e[t].style.display="flex"},s=()=>{l(e,t),t++,t>=e.length&&(t=0),n(e,t)};((e=3e3)=>{setInterval(s,e)})(1500)}catch(e){}})(),(()=>{const e=document.querySelector(".services-slider"),t=e.querySelectorAll(".slide"),l=document.getElementById("arrow-left"),n=document.getElementById("arrow-right");let s=document.documentElement.clientWidth,c=0,o=0,a=100/c;const r=()=>{const e=document.createElement("style");e.id="sliderCarousel-style",e.textContent=`\n            .glo-slider__item {\n                flex: 0 0 ${a}%;\n                width: 100%;\n            }\n            `,document.head.appendChild(e)};r();const d=e=>{e>=1108?(c=5,a=100/c,r()):e<1108&&e>=760?(c=4,a=100/c,r()):e<760&&e>=678?(c=3,a=100/c,r()):e<678&&e>=500?(c=2,a=100/c,r()):e<500&&(c=1,a=100/c,r())};d(s),window.addEventListener("resize",(()=>{let e=document.documentElement.clientWidth;d(e)})),(()=>{for(const e of t)e.classList.add("glo-slider__item")})(),l.addEventListener("click",(t=>{t.preventDefault(),o>0&&(--o,e.style.transform=`translate(-${o*a}%)`)})),n.addEventListener("click",(l=>{l.preventDefault(),o<t.length-c&&(++o,e.style.transform=`translate(-${o*a}%)`)}))})(),(()=>{document.querySelector(".gallery-bg");const e=document.querySelector(".gallery-slider"),t=e.querySelectorAll(".slide");let l,n,s,c,o,a,r,d=0;n=document.createElement("ul"),n.classList.add("slider-dots"),c=document.querySelector(".slider-dots"),t.forEach(((e,t)=>{let l=document.createElement("li");l.classList.add("slide-item");let s=document.createElement("button");l.append(s),0===t&&l.classList.add("slick-active"),n.append(l)})),e.append(n),l=n.querySelectorAll("li"),(()=>{o=document.createElement("a"),a=document.createElement("a"),r=document.createElement("div"),r.classList.add("arrow-wrap");const t=document.createElement("span");t.id="arrow-prev";const l=document.createElement("span");l.id="arrow-next",o.append(t),a.append(l),o.classList.add("slider-arrow","prev"),a.classList.add("slider-arrow","next"),r.append(o),r.append(a),e.append(r)})();const i=(e,t,l)=>{e[t].classList.remove(l)},m=(e,t,l)=>{e[t].classList.add(l)},u=()=>{i(t,d,"gallery-item-active"),i(l,d,"slick-active"),d++,d>=t.length&&(d=0),m(t,d,"gallery-item-active"),m(l,d,"slick-active")},y=(e=1500)=>{s=setInterval(u,e)};e.addEventListener("click",(e=>{e.preventDefault();let n=e.target;n.matches("button, span")&&(i(t,d,"gallery-item-active"),i(l,d,"slick-active"),n.matches("#arrow-prev")?d--:n.matches("#arrow-next")?d++:n.closest(".slide-item")&&[...l].forEach(((e,t)=>{e===n.closest(".slide-item")&&(d=t)})),d>=t.length&&(d=0),d<0&&(d=t.length-1),m(t,d,"gallery-item-active"),m(l,d,"slick-active"))})),e.addEventListener("mouseover",(e=>{const t=e.target;(t.matches("button")||t.matches("span"))&&clearInterval(s)})),e.addEventListener("mouseout",(e=>{const t=e.target;(t.matches("button")||t.matches("span"))&&y()})),y(1500)})(),(()=>{try{const e=document.getElementById("card_order"),t=document.querySelector(".time").querySelectorAll("input"),l=document.getElementById("price-total"),n=document.querySelectorAll("#card_order .club"),s=document.getElementById("hello");let c,o,a;const r=(e="mozaika")=>{const l=new XMLHttpRequest;l.open("GET",`./${e}.html`),l.addEventListener("readystatechange",(()=>{if(4===l.readyState&&200===l.status){const e=(new DOMParser).parseFromString(l.responseText,"text/html").querySelector(".cards-types"),n=e.querySelectorAll("input"),s=e.querySelectorAll("label");[...t].forEach((e=>{e.checked&&(a=e.value,[...n].forEach((e=>{2===e.value.length?(o=e.value.slice(0,1),d(a,o,s,e)):3!==e.value.length||e.matches("#t4")||(o=e.value.slice(0,2),d(a,o,s,e))})))})),i()}})),l.send(null)};r();const d=(e,t,l,n)=>{e===t&&[...l].forEach((e=>{if(n.id===e.getAttribute("for")){let t=e.childNodes[4].textContent;c=t.slice(0,t.length-1)}}))},i=()=>{"ТЕЛО2019"===s.value?l.textContent=Math.floor(c-.3*c):l.textContent=c};e.addEventListener("change",(e=>{const t=e.target;"card-type"===t.name?[...n].forEach((e=>{e.childNodes[1].checked&&"card_leto_mozaika"===e.childNodes[1].id?r("mozaika"):e.childNodes[1].checked&&"card_leto_mozaika"!==e.childNodes[1].id&&r("schelkovo")})):t.matches("#card_leto_mozaika")?r("mozaika"):t.matches("#card_leto_schelkovo")?r("schelkovo"):"hello"===t.id&&i()}))}catch(e){}})(),(()=>{const e=document.getElementById("thanks"),t=e.querySelector("p"),l=document.getElementById("free_visit_form"),n=document.getElementById("callback_form"),s=document.getElementById("price-total"),c=document.createElement("div");c.style.cssText="font-size: 14px",c.style.fontFamily='"Roboto", sans-serif',c.style.color="red",c.style.marginTop="5px",c.style.textAlign="center",document.querySelector("body").addEventListener("submit",(e=>{e.preventDefault();let t=e.target;if(t.matches("form")){t.appendChild(c),a("Идет отправка"),r(t);const e=new FormData(t);let l={};e.forEach(((e,t)=>{l[t]=e})),o(l).then((e=>{if(200!==e.status)throw new Error("status network not 200");a("Спасибо, мы скоро с вами свяжемся"),d(t)})).catch((e=>{a("Что-то пошло не так"),console.error(e)})),i(t)}}));const o=e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=e=>{c.textContent=e},r=l=>{(l.matches("#banner-form")||l.matches("#footer_form"))&&(e.style.display="block",t.textContent="",t.appendChild(c))},d=t=>{setTimeout((function(){c.textContent="",(t.matches("#banner-form")||t.matches("#footer_form")||t.matches("#form1")||t.matches("#form2"))&&(e.style.display="none",l.style.display="none",n.style.display="none")}),2e3)},i=e=>{e.reset(),s&&(s.textContent="1999")};document.querySelector("body").addEventListener("input",(e=>{const t=e.target;"hello"===t.id?t.value=t.value.match(/[а-яё0-9]+/gi):"text"===t.type&&"hello"!==t.id?(t.value=t.value.match(/[а-яё]+/gi),t.value.length<2?t.setCustomValidity("Имя должно состоять минимум из двух букв"):t.setCustomValidity("")):"tel"===t.type&&(t.value.length<16?t.setCustomValidity("Номер должен состоять минимум из десяти цифр"):t.setCustomValidity(""))})),document.querySelector("body").addEventListener("click",(e=>{const t=e.target;if(t.matches("button")&&!t.matches(".callback-btn")&&!t.matches(".close-btn")||t.matches("#callback-btn-no")){let e=t.closest("form");[...e.querySelectorAll("input")].forEach((t=>{"checkbox"!==t.type&&"radio"!==t.type||(t.setAttribute("required",!0),t.checked||("checkbox"===t.type?a("Необходимо подтвердить согласие"):"radio"===t.type&&a("Необходимо выбрать клуб/клубную карту"),e.appendChild(c)))}))}}))})(),function(e,t="+7(___)___-__-__"){const l=document.querySelectorAll(e);function n(e){const l=e.keyCode,n=t,s=n.replace(/\D/g,""),c=this.value.replace(/\D/g,"");let o=0,a=n.replace(/[_\d]/g,(function(e){return o<c.length?c.charAt(o++)||s.charAt(o):e}));o=a.indexOf("_"),-1!=o&&(a=a.slice(0,o));let r=n.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");r=new RegExp("^"+r+"$"),(!r.test(this.value)||this.value.length<5||l>47&&l<58)&&(this.value=a),"blur"==e.type&&this.value.length<5&&(this.value="")}for(const e of l)e.addEventListener("input",n),e.addEventListener("focus",n),e.addEventListener("blur",n)}("input[type=tel]")})();